SELinux Policy Patches
======================

This directory contains the list of patches applied to the refpolicy. The
patches are either in the form of "fix-<category>-<module>-r<revision>.patch"
or "<changeset>-<module>-<description>-r<revision>.patch"

The used <revision> helps identify in which patchbundle a patch(set) is
included.

Open Issues
-----------

Support for named initrc_t domains (cfr http://dpaste.com/594913/)

Change sets in this patch bundle
--------------------------------

The following is the list of changesets in the patch bundle. A "-" means that
the patch is currently Gentoo-only. A "+" means that the patch is accepted
upstream (refpolicy) and as such should not need to be re-applied if a new
refpolicy release is made. A "." means that the patch is pending (submitted but
not yet approved). An "!" means that the patch will not be sent upstream
(anymore).

0001 ! udev can call networking scripts directly (for hotplugging reasons) [1]
0002 - introduce XDG types (user data and configuration directories)
0003 - add mutt declaration and update gpg to interact with mutt
0004 - add pan declaration
0005 . add links declaration
0006 - add skype declaration
0007 - add gorg declaration
0008 - add nginx declaration
0009 - add bacula declaration
0010 - dontaudit set 1
0011 - wpa_cli is a commandline utility
0012 - various corecommands file contexts updates
0013 - add gentoo_portage_eselect_module interface
0014 . mount requires relabelfrom rights as well to support non-standard mounts like /usr/portage
0015 . allow mount to read/write puppet tmp files (used to gather output of mount)
0016 - mark portage_ebuild_t as a mountpoint
0017 - mark debugfs_t as a mountpoint
0018 - allow syslog to create /var/lib/syslog
0019 - structured set of patches for asterisk
0020 - mark glsa-check as portage entry file
0021 - allow gcc_config_t to work with nfs-mounted portage tree
0022 - use runtime files for gcc-config (+ tmp support for "tac" command)
0023 . add vde declaration
0024 - bootmisc wants to write (temporarily) to /var/log. Support logging_manage_generic_log_dirs
0025 + Mark /dev/.tmp-block-.* as fixed_disk_device_t so that mdadm can work on it (file is created by udev as $tempnode)
0026 - update on fail2ba (start from initrc_t), dontaudit for python scripts wanting to write .pyc files where .py files are
0027 - mark remotelogin_domtrans call in telnet as optional (no hard dependency)
0028 - add virtualization context files
0029 - allow virtd to read the selinux config (etc/selinux/config) as libselinux needs this to find out the correct SELINUXTYPE= value (cfr call to selinux_virtual_domain_context_path)
0030 - ensure that initrc can connect to the virt sockets
0031 - update virtualization so that sysadmin can use tools like virsh
0032 - updates for init
0033 - allow creation of user keys by sudo, needed for sudo with selinux integration
0034 - do not have java-config be marked as a java_t entry point
0035 . introduce dracut domain and interfaces
0036 - update on udev, later versions manage the udev_tbl_t moer than just files
0037 - lvm now uses setfscreate for tools like pvscan, vgscan, vgchange, probably through the libudev binding
0038 - allow initrc_t to create dirs in /sys (some init scripts do this), we might want to change to named filetrans later here
0039 - allow portage_fetch_t to use portage_devpts_t, show progress of downloads for instance
0040 - allow portage_sandbox_t to use git (git-2 eclass)
0041 - update syslog file contexts for .persist- file
0042 - allow exports (under initrc_t) to manage state data for NFS
0043 - allow dhcp daemon to bind to generic udp ports
0044 - update on puppet policy
0045 - update on mozilla policy
0046 - update on courier policy
0047 - update on openldap policy
0048 - update on postfix policy
0049 - update on postgresql policy
0050 - update on xserver policy
0051 - make cron domains use interactive file descriptors (?)
0052 . dhcpd can use ldap as backend
0053 - allow mozilla plugin to read its configuration files (currently still very generic)
0054 - introduce generic attributes for apache and web content handling


[1] Refpolicy would like to see an intermediate domain (udev_network_initrc_t or something similar) which
    has the domtrans in it. In our case, this probably means that the udev "net.sh" script should use that.
    However, the patch is, imo (SwifT) fairly simple as-is so I suggest to keep it this way.
